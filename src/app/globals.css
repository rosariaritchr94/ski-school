@tailwind base;
@tailwind components;
@tailwind utilities;

/* =============== BASE =============== */
@layer base {
  :root {
    --bg: 16 16 16;       /* #101010 */
    --fg: 245 245 245;    /* #f5f5f5 */
    --accent: 55 198 230; /* CTA azzurro */
    --mtn-dark: 29 138 165;

    /* Micro-fix */
    --bianco-delta: 0px;
    --logo-delta: 0px;

    /* HERO (valori base mobile/desktop piccoli) */
    --hero-shift: 60px;
    --mtn-height: 320px;
    --mtn-bottom: -56px;

    /* Fattori (montagne) */
    --k-scuro: 0.6667;
    --k-chiaro: 0.6167;
    --k-bianco: 0.4667;
    --k-logo: 1.0833;

    /* Parallax (set da JS) */
    --p-scuro: 0px;
    --p-chiaro: 0px;
    --p-bianco: 0px;

    /* Logo hero */
    --logo-size: 120px;

    /* Offset titoli hero */
    --title-offset: 6.5rem;

    /* Spazio sotto ai titoli (controlla dove â€œfinisceâ€ il nero dellâ€™hero) */
    --hero-pad-bottom: 360px;

    /* Intro bianca */
    --intro-pullup: 220px;
    --intro-threshold: 300px;

    /* Sezione SERVIZI (azzurro) */
    --blue-lift: 300px;
    --blue-factor: 0.50;
    --blue-top: 8px;

    /* Sezione SAFETY (nero) */
    --black-lift: 220px;
    --black-factor: 0.55;
    --black-top: 28px;
  }

  html,
  body {
    height: 100%;
  }

  body {
    background: rgb(var(--bg));
    color: rgb(var(--fg));
    @apply antialiased overflow-x-hidden;
  }

  .font-sofia {
    font-family: var(--font-sofia), system-ui, sans-serif;
  }
  .font-oswald {
    font-family: var(--font-oswald), system-ui, sans-serif;
  }

  h1,
  h2,
  h3,
  h4,
  .heading {
    @apply font-sofia uppercase;
  }
}

/* ======= BREAKPOINTS DESKTOP/TABLET ======= */
@media (min-width: 768px) {
  :root {
    --hero-shift: -8px;
    --mtn-height: 420px;
    --mtn-bottom: -80px;
    --logo-size: 120px;
    --title-offset: 9rem;

    --hero-pad-bottom: 560px;

    --intro-pullup: 260px;

    --blue-lift: 340px;
    --blue-top: 10px;
    --blue-factor: 0.5;

    --black-lift: 260px;
    --black-factor: 0.5;
    --black-top: 32px;
  }
}

/* âœ… TABLET â€œpiccoliâ€ (sotto 14") */
@media (min-width: 768px) and (max-width: 1023px) {
  :root {
    --title-offset: 7.9rem;
    --hero-pad-bottom: 620px;

    --intro-pullup: 240px;
    --intro-threshold: 260px;

    --blue-lift: 360px;
    --blue-factor: 0.55;
    --blue-top: 10px;

    --black-lift: 280px;
    --black-factor: 0.48;
    --black-top: 32px;
  }
}

@media (min-width: 1024px) {
  :root {
    --hero-shift: -16px;
    --mtn-height: 520px;
    --mtn-bottom: -100px;
    --logo-size: 130px;
    --title-offset: 10rem;

    --hero-pad-bottom: 760px;

    --intro-pullup: 300px;

    --blue-lift: 380px;
    --blue-top: 12px;
    --blue-factor: 0.52;

    --black-lift: 300px;
    --black-factor: 0.48;
    --black-top: 34px;
  }
}

@media (min-width: 1280px) {
  :root {
    --hero-shift: -20px;
    --mtn-height: 560px;
    --mtn-bottom: -110px;
    --logo-size: 130px;
    --title-offset: 11rem;

    --hero-pad-bottom: 800px;

    --intro-pullup: 320px;

    --blue-lift: 420px;
    --blue-top: 14px;
    --blue-factor: 0.54;

    --black-lift: 340px;
    --black-factor: 0.45;
    --black-top: 36px;
  }
}

@media (min-width: 1536px) {
  :root {
    --hero-shift: -20px;
    --mtn-height: 560px;
    --mtn-bottom: -110px;
    --logo-size: 140px;
    --title-offset: 11.5rem;

    --hero-pad-bottom: 840px;

    --intro-pullup: 320px;

    --blue-lift: 420px;
    --blue-top: 16px;
    --blue-factor: 0.54;

    --black-lift: 340px;
    --black-factor: 0.45;
    --black-top: 40px;
  }
}

/* ===== MOBILE: taratura smartphone ===== */
@layer base {
  @media (max-width: 767px) {
    :root {
      --title-offset: 4.25rem;
      --hero-pad-bottom: 440px;

      --hero-shift: 32px;
      --mtn-height: 300px;
      --mtn-bottom: -40px;
      --logo-size: 110px;

      --logo-delta: -48px;
      --bianco-delta: -26px;

      --intro-pullup: 280px;
      --intro-threshold: 270px;

      --blue-lift: 380px;
      --blue-factor: 0.70;
      --blue-top: 8px;

      --black-lift: 240px;
      --black-factor: 0.08;
      --black-top: 26px;
    }
  }
}

/* ======= MICRO-FIX ======= */
@media (min-width: 1366px) and (max-width: 1535px) {
  :root {
    --bianco-delta: 38px;
    --logo-delta: 56px;
  }
}
@media (min-width: 1536px) and (max-width: 1920px) {
  :root {
    --bianco-delta: 42px;
    --logo-delta: 58px;
  }
}
@media (width: 1920px) and (height: 1080px) {
  :root {
    --bianco-delta: 44px;
    --logo-delta: 58px;
  }
}

/* ============ COMPONENTS (GLOBAL) ============ */
@layer components {
  .container-site {
    @apply mx-auto w-full max-w-[1200px] px-4 md:px-6;
  }

  .btn {
    @apply inline-flex items-center justify-center rounded-full px-4 py-2 text-[11px] font-semibold uppercase tracking-[0.18em] transition;
  }
  .btn-accent {
    background: rgb(var(--accent));
    color: #001018;
  }
  .btn-ghost {
    @apply border border-white/60 text-white hover:bg-white hover:text-black;
  }

  .card-dark {
    @apply rounded-xl border border-white/80 bg-black/90 shadow-xl shadow-black/40;
  }

  /* ===== HERO mountains (HOME) ===== */
  .mtn-wrap {
    position: absolute;
    left: 0;
    right: 0;
    bottom: var(--mtn-bottom);
    height: var(--mtn-height);
    pointer-events: none;
    overflow: visible;
    transform: translateY(var(--hero-shift));
    will-change: transform;
    z-index: 10;
  }
  .mtn {
    position: absolute;
    inset: 0;
  }
  .mtn > img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: top center;
    display: block;
  }
  .mtn--scuro {
    transform: translateY(
      calc(var(--mtn-height) * var(--k-scuro) * -1 + var(--p-scuro))
    );
  }
  .mtn--chiaro {
    transform: translateY(
      calc(var(--mtn-height) * var(--k-chiaro) * -1 + var(--p-chiaro))
    );
  }
  .mtn--bianco {
    transform: translateY(
      calc(
        var(--mtn-height) * var(--k-bianco) * -1 + var(--p-bianco) +
          var(--bianco-delta)
      )
    );
  }

  .hero-logo {
    position: absolute;
    left: 50%;
    top: calc(100% - calc(var(--mtn-height) * var(--k-logo)));
    transform: translate(-50%, calc(var(--hero-shift) + var(--logo-delta)));
    pointer-events: none;
    z-index: 40;
    will-change: transform;
  }
  .hero-logo img {
    width: var(--logo-size);
    height: var(--logo-size);
    display: block;
  }

  /* Navbar utility */
  .nav-solid {
    background: #101010;
  }

  /* ===== Slices (HOME) ===== */

  .slice-intro {
    position: relative;
    z-index: 20;
    background: #ffffff;

    margin-top: calc(-1 * var(--intro-pullup));
    padding-top: max(0px, calc(var(--intro-pullup) - var(--intro-threshold)));
    padding-bottom: clamp(28px, 6vw, 80px);
    isolation: isolate;
  }

  .slice-intro::before {
    content: "";
    position: absolute;
    left: 0;
    right: 0;
    top: -20px;
    height: 20px;
    background: #ffffff;
    z-index: 0;
  }
  .slice-intro > * {
    position: relative;
    z-index: 1;
  }

  .slice-blue {
    position: relative;
    z-index: 30;
    background: transparent;

    margin-top: calc(-1 * var(--blue-lift) * var(--blue-factor));
    padding-top: calc(var(--blue-lift) * var(--blue-factor) + var(--blue-top));
    padding-bottom: clamp(36px, 7vw, 120px);

    isolation: isolate;
  }
  .slice-blue::before {
    content: "";
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    z-index: -1;
    pointer-events: none;
    background: url("/img/MONTAGNA4.png") center top / cover no-repeat;
  }

  .slice-black {
    position: relative;
    z-index: 40;
    background: transparent;

    margin-top: calc(-1 * var(--black-lift) * var(--black-factor));
    padding-top: calc(var(--black-lift) * var(--black-factor) + var(--black-top));
    padding-bottom: clamp(36px, 7vw, 120px);

    isolation: isolate;
  }
  .slice-black::before {
    content: "";
    position: absolute;
    left: 0;
    right: 0;
    top: -65px;
    bottom: 0;
    z-index: -1;
    pointer-events: none;
    background: url("/assets/slices/MONTAGNA5.png") center top / cover no-repeat;
  }

  .slice-white {
    position: relative;
    z-index: 50;
    background: transparent;

    margin-top: -110px;
    padding-top: calc(110px + clamp(24px, 5vw, 80px));
    padding-bottom: clamp(36px, 7vw, 120px);

    min-height: 520px;
    isolation: isolate;
  }
  .slice-white::before {
    content: "";
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    z-index: -1;
    background: url("/assets/slices/MONTAGNA6.png") center top / cover no-repeat;
  }
}

/* ===== MOBILE: layering corretto + contatti sopra la nera ===== */
@layer components {
  @media (max-width: 767px) {
    .slice-intro::before {
      top: -60px;
      height: 60px;
    }

    .slice-intro { z-index: 20; }
    .slice-blue  { z-index: 40; }
    .slice-black { z-index: 60; }
    .slice-white { z-index: 80; }

    .slice-black::before {
      top: -85px;
    }

    .slice-white {
      margin-top: -48px;
      padding-top: calc(48px + clamp(24px, 5vw, 80px));
    }
  }
}

/* ====== PAGINA LEZIONI ====== */
@layer components {
  .lezioni-hero {
    position: relative;
    /* nero come il resto del sito */
    background-color: #101010;

    /* immagine di sfondo HERO LEZIONI */
    background-image: url("/foto/Screenshot-2025-12-05-alle-12.00.53.jpg");
    background-size: cover;
    background-repeat: no-repeat;

    /* inquadratura: center (orizzontale) / 70% (verticale) */
    background-position: center 70%;
    isolation: isolate;
  }

  .lezioni-hero::before {
    content: "";
    position: absolute;
    inset: 0;
    /* sfuma verso lo stesso nero (#101010) */
    background: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.45),
      #101010
    );
    z-index: 0;
  }

  .lezioni-hero .inner {
    position: relative;
    z-index: 1;
    padding-top: clamp(72px, 14vw, 160px);
    padding-bottom: clamp(28px, 8vw, 80px);
  }

  /* BLOCCO NERO LEZIONI: stesso nero di tutto il sito */
  .lezioni-black {
    background: #101010;
    padding-top: clamp(36px, 6vw, 88px);
    padding-bottom: clamp(36px, 6vw, 88px);
  }

  /* Blocco con tabella + riga "Supplemento..." (valore base desktop) */
  .lezioni-black--first {
    padding-bottom: 120px;
  }

  /* BLOCCO CON MONTAGNA4 (azzurro) â€“ Lezioni di gruppo + Orari */
  .lezioni-mtn {
    position: relative;
    background: #101010;         /* stesso nero del blocco sopra */
    margin-top: -91px;           /* overlap con il blocco nero */
    padding-top: calc(91px + 150px); /* distanza montagne â†’ contenuti */
    padding-bottom: clamp(48px, 7vw, 120px);
    isolation: isolate;
  }

  .lezioni-mtn::before {
    content: "";
    position: absolute;
    inset: 0;
    z-index: -1;
    background: url("/img/MONTAGNA4.png") center top / cover no-repeat;
  }

  .pill {
    @apply inline-flex items-center rounded bg-[#37C6E6] px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.18em] text-[#001018];
  }

  .price {
    @apply mt-1 text-[13px] font-semibold;
  }

  .foto-box {
    @apply bg-white rounded-[12px] shadow-[0_18px_40px_rgba(0,0,0,.35)];
  }

  /* ðŸ’» Tablet / portatili piccoli (768â€“1199px):
     piÃ¹ spazio sotto il testo di "Cancellazioni & Pagamenti"
     per evitare che la montagna azzurra lo tagli.   */
  @media (min-width: 768px) and (max-width: 1199px) {
    .lezioni-black--first {
      padding-bottom: 160px;
    }
  }
}

/* ===== LEZIONI â€“ MOBILE FIX (smartphone) ===== */
@layer components {
  @media (max-width: 767px) {
    /* quasi niente nero tra testo e montagna */
    .lezioni-black--first {
      padding-bottom: 110px;
    }

    .lezioni-mtn {
      margin-top: -110px;              /* quanto sale la montagna */
      padding-top: calc(110px + 40px); /* 40px di aria tra vette e contenuti */
    }

    .lezioni-mtn .foto-box {
      margin-top: 16px;
    }
  }
}

html {
  scroll-behavior: smooth;
}
