@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---------- Base ---------- */
@layer base {
  :root {
    --bg: 248 250 252; /* slate-50 */
    --fg: 15 23 42;    /* slate-900 */
    --card: 255 255 255;
  }
  html, body { height: 100%; }
  body { @apply bg-[rgb(var(--bg))] text-[rgb(var(--fg))] antialiased; }


 html { font-size: 16px; }                 /* base */
  @media (min-width: 768px)  { html { font-size: 15.5px; } } /* ~97% */
  @media (min-width: 1024px) { html { font-size: 15px; } }   /* ~94% */
  @media (min-width: 1280px) { html { font-size: 14.75px; } }/* ~92% */

  /* blocca eventuali scrollbar orizzontali */
  body { overflow-x: hidden; }
}

/* ---------- Components ---------- */
@layer components {
  .container-page { @apply container py-8 md:py-12; }

  .card   { @apply bg-[rgb(var(--card))] rounded-2xl shadow-card border border-slate-100; }
  .card-p { @apply p-5 md:p-6; }

  .btn { @apply inline-flex items-center justify-center rounded-xl px-4 py-2 font-medium transition; }
  .btn-primary { @apply bg-brand-600 text-white hover:bg-brand-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-600/50; }
  .btn-ghost { @apply bg-transparent hover:bg-slate-100; }

  .chip { @apply inline-flex items-center rounded-full px-3 py-1 text-sm bg-slate-100; }
}

/* ---------- Utilities ---------- */
@layer utilities {
  .grid-auto-fit { grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); }

  /* Tema neve / frost */
  .bg-snow {
    background:
      radial-gradient(1200px 600px at 50% -10%, rgba(14,165,233,0.08), transparent 60%),
      linear-gradient(180deg, #f8fafc 0%, #fff 100%);
  }
  .frost-card { @apply rounded-2xl border border-white/60 shadow-card bg-white/80 backdrop-blur; }
  .legend-dot { @apply inline-block w-3 h-3 rounded-sm align-middle mr-2; }

  /* Snowflake icon */
  @keyframes snowSpin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }
  @keyframes wobble { 0%,100% { transform: rotate(0deg) } 50% { transform: rotate(8deg) } }
  .snowflake { width: 18px; height: 18px; color: #0284c7; animation: snowSpin 12s linear infinite; }
  .snowflake:hover { animation: wobble 600ms ease; }

  /* Slot animations */
  @keyframes slotPulse { 0% { transform: scale(0.98) } 100% { transform: scale(1) } }
  .slot-btn { @apply h-9 rounded-md text-[11px] md:text-xs font-semibold transition shadow-sm ring-1 ring-white/20; }
  .slot-free {
    @apply bg-emerald-600 text-white;
    transition-property: transform, box-shadow, filter, background-color, color;
    transition-duration: 150ms;
  }
  .slot-free:hover { transform: translateY(-1px); filter: brightness(1.05); }
  .slot-free:active { transform: translateY(0); scale: 0.98; }
  .slot-busy { @apply bg-rose-600 text-white cursor-not-allowed opacity-90; }
  .slot-selected { @apply ring-2 ring-black/20; animation: slotPulse 180ms ease-out; }
}

/* ---------- Loader "ski fill" ---------- */
@keyframes ski-fill {
  0%   { --p: 0%; }
  50%  { --p: 100%; }
  100% { --p: 0%; }
}

/* Usa un PNG in public/img/skis.png (meglio con trasparenza) */
.ski-fill {
  width: 140px;
  height: 48px;
  color: #0f172a;
  --p: 0%;
  background: linear-gradient(90deg, currentColor var(--p), transparent 0);

  /* usa il PNG appena creato */
  -webkit-mask: url('/img/skis.png') center / contain no-repeat;
          mask: url('/img/skis.png') center / contain no-repeat;

  /* DEBUG (poi toglilo) */
  outline: 1px dashed rgba(15,23,42,0.25);
}
.ski-fill--indeterminate { animation: ski-fill 1.4s ease-in-out infinite; }

/* === Splash loader: stile orologio (niente orbita) === */
@keyframes handSweep {
  from { transform: translate(-50%, -50%) rotate(0deg); }
  to   { transform: translate(-50%, -50%) rotate(360deg); }
}

/* overlay full-screen */
.splash-overlay {
  position: fixed; inset: 0; z-index: 1000;
  display: grid; place-items: center;
  background: #fff; /* oppure usa .bg-snow se vuoi coerenza */
}

/* quadrante */
.splash-clock {
  position: relative;
  width: 220px; height: 220px;
  border-radius: 9999px;
  box-shadow: inset 0 0 0 2px rgba(2,132,199,0.2),
              0 10px 25px rgba(2,132,199,0.10);
  background:
    radial-gradient(600px 300px at 50% -10%, rgba(14,165,233,0.08), transparent 60%),
    linear-gradient(180deg, #f8fafc 0%, #ffffff 100%);
}

/* tacche orarie (12 tacche) */
.splash-clock::before {
  content: "";
  position: absolute; inset: 0;
  background:
    conic-gradient(from 0deg,
      rgba(2,132,199,0.25) 0deg 1.5deg, transparent 1.5deg 30deg) center/100% 100% no-repeat;
  -webkit-mask: radial-gradient(circle 48% at 50% 50%, transparent 46%, #000 46.5%);
          mask: radial-gradient(circle 48% at 50% 50%, transparent 46%, #000 46.5%);
}

/* mano = i tuoi sci, centrati e rotanti come una lancetta */
.splash-hand {
  position: absolute; left: 50%; top: 50%;
  width: 140px; /* regola la lunghezza della “lancetta” */
  transform-origin: 50% 50%;
  transform: translate(-50%, -50%);
  animation: handSweep 2.2s linear infinite; /* velocità rotazione */
  filter: drop-shadow(0 4px 10px rgba(0,0,0,0.12));
}
